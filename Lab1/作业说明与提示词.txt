作业提交
作业题目：
实验1：利用流式套接字编写聊天程序
起止日期：
2025-10-15 08:00:00 ~ 2025-11-22 23:59:59
作业满分：
100
作业说明：
实验要求：(1)设计聊天协议，并给出聊天协议的完整说明。(2)利用C或C++语言，使用基本的Socket函数进行程序编写，不允许使用CSocket等封装后的类。(3)程序应有基本的对话界面，但可以不是图形界面。程序应有正常的退出方式。(4)完成的程序应能支持英文和中文聊天。(5)采用多线程，支持多人聊天。(6)编写的程序应结构清晰，具有较好的可读性。(7)在实验中观察是否有数据包的丢失，提交程序源码、可执行代码和实验报告。评分标准：


#codebase 请你阅读代码,在readme中是实验说明,请你结合代码指导我接下来的实验


#codebase 请你阅读代码,在readme中是实验说明,请你结合代码指导我接下来的实验 ,中期目标.md是我现在想要实现的内容,请你主要阅读这个文档,给出解析和指导(这次不要直接修改代码


#codebase

我现在有一个问题:session的定义现在是否合理? 包含type是否合理? 还有关于关于session的管理, 我的想法是sever管理当前系统中所有的在线session , client管理当前用户参加的session . 对于后续持久化的内容, client登陆前认证, 如果已经存在用户,则从client端读取历史数据, 并对比server端, 看消息是否同步 这个思路是否合理?



现在代码存在问题, client上线后默认加入聊天室, 消息转发都在聊天室中,如果用switch指令切换session , 的确消息只转发给到对应的的session ,但是如果是私聊,对应用户回消息的依然是全局发送. 而且是我想能不能client上线后不加入聊天室,但是server自动在第一个client上线后创建一个默认的session .用户进入聊天室需要用switch ,查看聊天室的消息和发送消息都要用session (这里涉及到消息同步 ) 这样设计我觉得更加贴近我的目标:设计一个类似微信的简化版




│ ┌─────────┐ │
└─────→│ Server │←─────┘
│(仅转发) │
└─────────┘ 这是我期望的数据存储方式,我期望实现一个微信的简化版, 用户在线时,可以同时接受已经加入的session的消息 , 用户下线后再次登录,如果输入的用户名匹配,则从本地恢复之前的消息记录,并且实现消息与在线的session历史同步. 请你根据我的期望检查已有代码,并指出如何实现持久化存储(用sqllite,预编译文件)